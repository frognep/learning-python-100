I did not realize how inefficient it was to write majority of the code in one function.
No wonder why it was a challenge.

I will re-visit this and do it right in the future.